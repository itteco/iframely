(function($,window,document,undefined){"use strict";var pluginName="github",defaults={user:"itteco",show_extended_info:true,show_follows:true,width:"400px",show_repos:10,oldest_first:false};function Github(element,options){this.element=element;this.options=$.extend({},defaults,options);this.init();this.errorType=""}Github.prototype={init:function(){var el=this.element,options=this.options,user=this.model("user",options.user,function(data){$(el).append(Github.prototype.view_layout(data.data,options))}),repos=this.model("repos",options.user,function(data){$(el).find("#ghw-repos ul").append(Github.prototype.view_partial_repos(data,options,el));$(el).find("#ghw-repos #ghw-github-loader").slideUp(250,function(){$(el).find("#ghw-repos ul").slideDown(250)});Github.prototype.bind(options)})},model:function(type,user,callback){var url="https://api.github.com/users/"+user.toLowerCase();if(type==="repos"){url+="/repos"}url+="?callback=?";$.getJSON(url,function(data){if(typeof callback!=="undefined"&&typeof callback==="function"){callback(data)}})},view_layout:function(user,options){var markup="";markup+='<div id="ghw-github" style="width: '+options.width+'">';markup+='<div id="ghw-header" class="ghw-clear">';markup+='<div id="ghw-logo"><a target="_blank" href="https://github.com/">Github</a></div>';markup+='<div id="ghw-user"><a target="_blank" href="'+user.html_url+'" id="ghw-github-user">';if(typeof user.avatar_url!=="undefined"&&user.avatar_url&&user.avatar_url.length>0){markup+='<img src="'+user.avatar_url+'" alt="Avatar" width="34px" height="34px" />'}else{markup+='<img src="https://a248.e.akamai.net/assets.github.com/images/gravatars/gravatar-140.png" alt="Avatar" width="34px" height="34px" />'}markup+="</a></div>";if(options.show_extended_info===true){markup+='<div id="ghw-extended-user-info">';if(typeof user.name!=="undefined"&&user.name&&user.name.length>0){markup+='<p class="ghw-name">'+user.name+"</p>"}markup+='<p class="ghw-place">';if(typeof user.company!=="undefined"&&user.company&&user.company.length>0){markup+=user.company+" "}if(typeof user.location!=="undefined"&&user.location&&user.location.length>0){markup+=user.location}markup+="</p>";if(typeof user.bio==="string"&&user.bio.length>0){markup+='<p class="ghw-bio">'+user.bio+"</p>"}if(user.hireable===true){markup+='<p class="ghw-hireable">I\'m availabe for hire!</p>'}markup+='<span class="ghw-repos">'+user.public_repos+" repos</span>";markup+='<span class="ghw-gists">'+user.public_gists+" gists</span>";markup+="</div>"}markup+='<div id="ghw-github-user-data">';markup+='<h2><a target="_blank" href="'+user.html_url+'">';if(typeof user.login!=="undefined"&&user.login){markup+=user.login}else{markup+="User not found"}markup+="</a></h2>";markup+='<a target="_blank" href="'+user.html_url+'" id="ghw-header-total-repos">'+user.public_repos+" repos</a>";if(options.show_follows===true&&typeof user.login!=="undefined"&&user.login){markup+=' | <a target="_blank" href="https://github.com/'+user.login.toLowerCase()+'/followers" id="ghw-current-followers">'+user.followers+" followers</a>"}markup+="</div>";markup+="</div>";markup+='<div id="ghw-repos"><div id="ghw-github-loader"></div><ul></ul></div>';markup+="</div>";return markup},view_partial_repos:function(data,options,el){var markup="";if(options.oldest_first===true){data=data.data.reverse()}else{data=data.data}$.each(data,function(i){if(i<=options.show_repos-1){markup+='<li id="ghw-repo-'+i+'" class="ghw-clear ghw-repo';if(this.language!==null){markup+=" double"}markup+='">';markup+='<div class="ghw-left">';markup+='<p class="ghw-title"><a target="_blank" href="'+this.html_url+'" data-description="<p>'+this.name+"</p>"+this.description+'" class="ghw-github-tooltip">'+this.name+"</a></p>";markup+='<p class="ghw-meta-data">';if(this.language!==null){markup+='<span class="ghw-language">'+this.language+"</span></p>"}markup+="</div>";markup+='<div class="ghw-right">';markup+='<span class="ghw-forks ghw-github-tooltip" data-description="This repo has '+this.forks+' fork(s)">'+this.forks+"</span>";markup+='<span class="ghw-watchers ghw-github-tooltip" data-description="This repo has '+this.watchers+' watcher(s)">'+this.watchers+"</span>";markup+='<span class="ghw-issues ghw-github-tooltip" data-description="This project has '+this.open_issues+' open issues">'+this.open_issues+"</span>";markup+="</div>";markup+="</li>"}});return markup},bind:function(options){if(options.show_extended_info===true){$("#ghw-github-user").hover(function(){$("#ghw-github #ghw-header #ghw-extended-user-info").fadeIn(250,function(){$("#ghw-github #ghw-header img").addClass("ghw-ghw-no-bottom-border")})},function(){$("#ghw-github #ghw-header #ghw-extended-user-info").fadeOut(250,function(){$("#ghw-github #ghw-header img").removeClass("ghw-ghw-no-bottom-border")})})}$("#ghw-github li").hover(function(){$(this).find(".ghw-right").animate({opacity:1},200)},function(){$(this).find(".ghw-right").animate({opacity:.3},200)});$(".ghw-github-tooltip").hover(function(){var markup='<div class="ghw-github-tooltip-content">'+$(this).attr("data-description")+"</div>";$(this).append(markup)},function(){$(".ghw-github-tooltip-content").remove()})}};$.fn[pluginName]=function(options){return this.each(function(){if(!$.data(this,"plugin_"+pluginName)){$.data(this,"plugin_"+pluginName,new Github(this,options))}})}})(jQuery,window,document);